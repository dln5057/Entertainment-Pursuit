<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!--   <link rel="stylesheet" href="assets/css/style.css"> -->
  <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

  <!-- Firebase Reference -->
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>

  <!-- Moment.js Reference -->
  <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>
    <style>
      #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
    <script>

    
  var lat=0;
    var long=0;


    function queryUrlConstructor (lat, long) {
      var queryURL = "https://crossorigin.me/https://maps.googleapis.com/maps/api/place/nearbysearch/json?keyword=museums&location="+lat+","+long+"&radius=50000&key=AIzaSyB57N6LfRt0KPZjKV9f0U-rxCaNF4KLL-k";
      return queryURL;

    } 
    

//     //50,000 meters///////////
function getMuseum (queryURL) {
    $.ajax({url: queryURL, method: 'GET'}).done(function(response) {
    var results = response.data;
    console.log(queryURL);
    console.log(response);
  });
}  

  var q = queryUrlConstructor("test", "test");
  console.log(q);


 

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    var latlon = position.coords.latitude + "," + position.coords.longitude;
    lat = position.coords.latitude;
    long = position.coords.longitude;
    var queryUrl = queryUrlConstructor(lat, long);
    console.log(queryUrl);
    getMuseum(queryUrl);
    console.log(queryUrl); 
    // var img_url = "http://maps.googleapis.com/maps/api/staticmap?center="
    // +latlon+"&zoom=14&size=400x300&sensor=false";
    // document.getElementById("mapholder").innerHTML = "<img src='"+img_url+"'>";
    console.log(lat + "," + long)
}


getLocation();
  function initMap() {
        var uluru = {lat: lat, lng: long}
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: uluru
        });
        var marker = new google.maps.Marker({
        map: map,
        // icon: image,
        // title: place.name,
        // position: place.geometry.location
        });
        

      }

    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWAIaiBXBdy-XApeUPZiCX3c7Xd-t3COk&callback=initMap">
    </script>
  </body>
</html>